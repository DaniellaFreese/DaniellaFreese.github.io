<!doctype html><html itemscope itemtype=https://schema.org/WebPage class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=siteBaseUrl content="https://DaniellaFreese.github.io"><meta name=author content="danny freese"><meta name=description content="danny freese coding blog as a female software engineer."><meta name=keywords content="danny freese,female software engineer blog,coding"><meta name=generator content="Hugo 0.119.0"><title>Kong Mesh - Tracing the Envoy Proxy Configuration | Danny Freese - Coding for a Living</title><meta itemprop=name content="Kong Mesh - Tracing the Envoy Proxy Configuration"><meta itemprop=description content="Kong Mesh - Tracing the Envoy Proxy Configuration - danny freese coding blog as a female software engineer."><meta property="og:title" content="Kong Mesh - Tracing the Envoy Proxy Configuration"><meta property="og:description" content="Kong Mesh - Tracing the Envoy Proxy Configuration - danny freese coding blog as a female software engineer."><meta property="og:image" content="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?size=200"><meta property="og:url" content="https://DaniellaFreese.github.io/article/mesh/kuma-envoy-proxy-dive/"><meta property="og:site_name" content="Danny Freese - Coding for a Living"><meta property="og:type" content="article"><script src=/modernizr-simple.js></script>
<link href=/article/mesh/kuma-envoy-proxy-dive/ rel=alternate type=application/rss+xml title="Danny Freese - Coding for a Living"><link href=/article/mesh/kuma-envoy-proxy-dive/ rel=feed type=application/rss+xml title="Danny Freese - Coding for a Living"><link rel=canonical href=https://DaniellaFreese.github.io/article/mesh/kuma-envoy-proxy-dive/><link rel=stylesheet href=https://DaniellaFreese.github.io/theme.css></head><body class=bilberry-hugo-theme><nav class="permanentTopNav sticky"><div class=container><ul class=topnav><li><a href=https://DaniellaFreese.github.io/page/publications/>Publications</a></li><li><a href=https://DaniellaFreese.github.io/page/about/>About</a></li><li><a href=https://DaniellaFreese.github.io/page/projects/>Projects</a></li><li><a href=https://github.com/DaniellaFreese target=_blank>Github</a></li></ul><div id=search-box class=search><i class="fas fa-search"></i>
<input id=search type=text placeholder="Search ..."></div></div></nav><header class=sticky><div class=container><div class=logo><a href=/ class=logo><img src=/images/square-modified.png alt>
<span class=overlay><i class="fa fa-home"></i></span></a></div><div class=titles><h3 class=title><a href=/>Danny Freese - Coding for a Living</a></h3><span class=subtitle>Hello World! I am constantly learning and happen to be a female software engineer. I thought it would be fun to document my thoughts, resources that help me, and journey.</span></div><div class="toggler permanentTopNav"><i class="fa fa-bars" aria-hidden=true></i></div></div></header><div class="main container"><div class="article-wrapper u-cf single"><a class=bubble href=https://DaniellaFreese.github.io/article/mesh/kuma-envoy-proxy-dive/><i class="fas fa-fw fa-pencil-alt"></i></a><article class="default article"><div class=content><h1 class=article-title><a href=https://DaniellaFreese.github.io/article/mesh/kuma-envoy-proxy-dive/>Kong Mesh - Tracing the Envoy Proxy Configuration</a></h1><div class=meta><span class="date moment">2022-10-05</span>
<span class=categories><a href=https://DaniellaFreese.github.io/categories/service-mesh/>Service Mesh</a></span>
<span class=author><a href=https://DaniellaFreese.github.io/author/djfreese/>djfreese</a></span></div><p><strong>Situation:</strong> Learning more about Kong Mesh and Envoy Proxy, I wanted to be able to understand how Envoy Proxy connects all the networks dots through its configuration file. So I spun Kong Mesh with several dataplanes trace it all.</p><p>Basically what I wanted to see manually was all the steps Envoy takes to make the below connection happen:</p><pre tabindex=0><code>Kong Gateway --&gt; Envoy Proxy of Gateway --&gt; Envoy Proxy of Monolith --&gt; Monolith
</code></pre><p>What I ended up finding was the following:</p><pre tabindex=0><code>I. Kong Gateway --&gt; Envoy Proxy --&gt; Listener on Port to Outbound Service (Monolith) --&gt; Route Config to Monolith --&gt; Cluster Monolith --&gt; Monolith Endpoint --&gt;

II. Envoy Proxy of Monolith --&gt; Listener in on Port --&gt; Route Config --&gt; Cluster --&gt; Endpoint - localhost 8080 where Monolith`
</code></pre><h2 id=installing-jid-tooling>Installing jid tooling</h2><p>First I installed the <code>jid</code> tool on the host machines I was working on <a href=https://github.com/simeji/jid#simply-use-jid-command>jid - github</a>.</p><p>It did prove to be super convenient to filter through the giant json data.</p><h2 id=envoy-proxy---gateway>Envoy Proxy - Gateway</h2><p>Starting the the Envoy Proxy supporting the Gateway.</p><p><strong>First</strong> - I wanted to get the config dump of the xds configuration. I did that by running the curl command below.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span> curl -X GET localhost:9901/config_dump?include_eds &gt; gateway_configDump.json
</span></span></code></pre></div><p>I had to use the extra query parameter <code>include_eds</code> to also retrieve the endpoint information. I didn&rsquo;t know this as first but was directed to <a href=https://www.envoyproxy.io/docs/envoy/latest/operations/admin#get--config_dump?include_eds>Envoy Proxy API docs</a>.</p><h3 id=gateway---dynamic-listener>Gateway - Dynamic Listener</h3><p>Basically in the output below I could summarize the following reading it top down:</p><ol><li>proxy is listening on 33033</li><li>it is using the HTTP Connection Manager in the filter chain to create a route config</li><li>the route config will foward on any traffic matching to the route <code>/</code> (the base url) to the cluster <code>monolith-service_svc_5000</code></li></ol><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1</span><span>[Filter]&gt; .configs[<span style=color:#2aa198>2</span>].dynamic_listeners[<span style=color:#2aa198>1</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4</span><span>  <span style=color:#268bd2>&#34;active_state&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5</span><span>    <span style=color:#268bd2>&#34;last_updated&#34;</span>: <span style=color:#2aa198>&#34;2022-10-04T21:24:13.388Z&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6</span><span>    <span style=color:#268bd2>&#34;listener&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7</span><span>      <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.config.listener.v3.Listener&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8</span><span>      <span style=color:#268bd2>&#34;address&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9</span><span>        <span style=color:#268bd2>&#34;socket_address&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10</span><span>          <span style=color:#268bd2>&#34;address&#34;</span>: <span style=color:#2aa198>&#34;127.0.0.1&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11</span><span>          <span style=color:#268bd2>&#34;port_value&#34;</span>: <span style=color:#2aa198>33033</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12</span><span>        }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13</span><span>      },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">14</span><span>      <span style=color:#268bd2>&#34;filter_chains&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">15</span><span>        {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">16</span><span>          <span style=color:#268bd2>&#34;filters&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">17</span><span>            {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">18</span><span>              <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;envoy.filters.network.http_connection_manager&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">19</span><span>              <span style=color:#268bd2>&#34;typed_config&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">20</span><span>                <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">21</span><span>                <span style=color:#268bd2>&#34;common_http_protocol_options&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">22</span><span>                  <span style=color:#268bd2>&#34;idle_timeout&#34;</span>: <span style=color:#2aa198>&#34;3600s&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">23</span><span>                },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">24</span><span>                <span style=color:#268bd2>&#34;http_filters&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">25</span><span>                  {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">26</span><span>                    <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;envoy.filters.http.router&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">27</span><span>                    <span style=color:#268bd2>&#34;typed_config&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">28</span><span>                      <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.extensions.filters.http.router.v3.Router&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">29</span><span>                    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">30</span><span>                  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">31</span><span>                ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">32</span><span>                <span style=color:#268bd2>&#34;route_config&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">33</span><span>                  <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;outbound:monolith-service_svc_5000&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">34</span><span>                  <span style=color:#268bd2>&#34;request_headers_to_add&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">35</span><span>                    {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">36</span><span>                      <span style=color:#268bd2>&#34;header&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">37</span><span>                        <span style=color:#268bd2>&#34;key&#34;</span>: <span style=color:#2aa198>&#34;x-kuma-tags&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">38</span><span>                        <span style=color:#268bd2>&#34;value&#34;</span>: <span style=color:#2aa198>&#34;&amp;kuma.io/service=kong&amp;&amp;kuma.io/zone=on_prem&amp;&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">39</span><span>                      }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">40</span><span>                    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">41</span><span>                  ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">42</span><span>                  <span style=color:#268bd2>&#34;validate_clusters&#34;</span>: <span style=color:#cb4b16>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">43</span><span>                  <span style=color:#268bd2>&#34;virtual_hosts&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">44</span><span>                    {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">45</span><span>                      <span style=color:#268bd2>&#34;domains&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">46</span><span>                        <span style=color:#2aa198>&#34;*&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">47</span><span>                      ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">48</span><span>                      <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;monolith-service_svc_5000&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">49</span><span>                      <span style=color:#268bd2>&#34;retry_policy&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">50</span><span>                        <span style=color:#268bd2>&#34;num_retries&#34;</span>: <span style=color:#2aa198>5</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">51</span><span>                        <span style=color:#268bd2>&#34;per_try_timeout&#34;</span>: <span style=color:#2aa198>&#34;16s&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">52</span><span>                        <span style=color:#268bd2>&#34;retry_back_off&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">53</span><span>                          <span style=color:#268bd2>&#34;base_interval&#34;</span>: <span style=color:#2aa198>&#34;0.025s&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">54</span><span>                          <span style=color:#268bd2>&#34;max_interval&#34;</span>: <span style=color:#2aa198>&#34;0.250s&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">55</span><span>                        },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">56</span><span>                        <span style=color:#268bd2>&#34;retry_on&#34;</span>: <span style=color:#2aa198>&#34;gateway-error,connect-failure,refused-stream&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">57</span><span>                      },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">58</span><span>                      <span style=color:#268bd2>&#34;routes&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">59</span><span>                        {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">60</span><span>                          <span style=color:#268bd2>&#34;match&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">61</span><span>                            <span style=color:#268bd2>&#34;prefix&#34;</span>: <span style=color:#2aa198>&#34;/&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">62</span><span>                          },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">63</span><span>                          <span style=color:#268bd2>&#34;route&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">64</span><span>                            <span style=color:#268bd2>&#34;cluster&#34;</span>: <span style=color:#2aa198>&#34;monolith-service_svc_5000&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">65</span><span>                            <span style=color:#268bd2>&#34;timeout&#34;</span>: <span style=color:#2aa198>&#34;15s&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">66</span><span>                          }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">67</span><span>                        }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">68</span><span>                      ]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">69</span><span>                    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">70</span><span>                  ]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">71</span><span>                },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">72</span><span>                <span style=color:#268bd2>&#34;stat_prefix&#34;</span>: <span style=color:#2aa198>&#34;monolith-service_svc_5000&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">73</span><span>                <span style=color:#268bd2>&#34;stream_idle_timeout&#34;</span>: <span style=color:#2aa198>&#34;1800s&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">74</span><span>              }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">75</span><span>            }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">76</span><span>          ]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">77</span><span>        }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">78</span><span>      ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">79</span><span>      <span style=color:#268bd2>&#34;metadata&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">80</span><span>        <span style=color:#268bd2>&#34;filter_metadata&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">81</span><span>          <span style=color:#268bd2>&#34;io.kuma.tags&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">82</span><span>            <span style=color:#268bd2>&#34;kuma.io/service&#34;</span>: <span style=color:#2aa198>&#34;monolith-service_svc_5000&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">83</span><span>          }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">84</span><span>        }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">85</span><span>      },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">86</span><span>      <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;outbound:127.0.0.1:33033&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">87</span><span>      <span style=color:#268bd2>&#34;traffic_direction&#34;</span>: <span style=color:#2aa198>&#34;OUTBOUND&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">88</span><span>    },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">89</span><span>    <span style=color:#268bd2>&#34;version_info&#34;</span>: <span style=color:#2aa198>&#34;cc2a7552-f767-41b3-9905-5fa7ef71361f&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">90</span><span>  },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">91</span><span>  <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;outbound:127.0.0.1:33033&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">92</span><span>}
</span></span></code></pre></div><p>The next question I had was, ok this doesn&rsquo;t mention any info about the cluster <code>monolith-service_svc_5000</code> so lets go find that.</p><h3 id=gateway---dynamic-cluster>Gateway - Dynamic Cluster</h3><p>Reading the matching dynamic cluster configuration for <code>monolith-service_svc_5000</code> shown below I could interpret that basically it&rsquo;s a cluster of type <code>EDS</code>.</p><p>What the fudge is type EDS? Go back to the <a href=https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/service_discovery>Envoy Docs</a> I found</p><p><strong>The endpoint discovery service is a xDS management server based on gRPC or REST-JSON API server used by Envoy to fetch cluster members. The cluster members are called “endpoint” in Envoy terminology. For each cluster, Envoy fetch the endpoints from the discovery service.</strong></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1</span><span>[Filter]&gt; .configs[<span style=color:#2aa198>1</span>].dynamic_active_clusters[<span style=color:#2aa198>1</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2</span><span>{    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3</span><span>  <span style=color:#268bd2>&#34;cluster&#34;</span>: {                                                     
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4</span><span>    <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.config.cluster.v3.Cluster&#34;</span>,   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5</span><span>    <span style=color:#268bd2>&#34;circuit_breakers&#34;</span>: {                                               
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6</span><span>      <span style=color:#268bd2>&#34;thresholds&#34;</span>: [                     
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7</span><span>        {                                                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8</span><span>          <span style=color:#268bd2>&#34;max_connections&#34;</span>: <span style=color:#2aa198>1024</span>,          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9</span><span>          <span style=color:#268bd2>&#34;max_pending_requests&#34;</span>: <span style=color:#2aa198>1024</span>,    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10</span><span>          <span style=color:#268bd2>&#34;max_requests&#34;</span>: <span style=color:#2aa198>1024</span>,    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11</span><span>          <span style=color:#268bd2>&#34;max_retries&#34;</span>: <span style=color:#2aa198>3</span>                   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12</span><span>        }                       
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13</span><span>      ]        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">14</span><span>    },                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">15</span><span>    <span style=color:#268bd2>&#34;connect_timeout&#34;</span>: <span style=color:#2aa198>&#34;5s&#34;</span>,  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">16</span><span>    <span style=color:#268bd2>&#34;eds_cluster_config&#34;</span>: {            
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">17</span><span>      <span style=color:#268bd2>&#34;eds_config&#34;</span>: {                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">18</span><span>        <span style=color:#268bd2>&#34;ads&#34;</span>: {},                       
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">19</span><span>        <span style=color:#268bd2>&#34;resource_api_version&#34;</span>: <span style=color:#2aa198>&#34;V3&#34;</span>           
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">20</span><span>      }                                   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">21</span><span>    },                                       
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">22</span><span>    <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;monolith-service_svc_5000&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">23</span><span>    <span style=color:#268bd2>&#34;outlier_detection&#34;</span>: {         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">24</span><span>      <span style=color:#268bd2>&#34;enforcing_consecutive_5xx&#34;</span>: <span style=color:#2aa198>0</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">25</span><span>      <span style=color:#268bd2>&#34;enforcing_consecutive_gateway_failure&#34;</span>: <span style=color:#2aa198>0</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">26</span><span>      <span style=color:#268bd2>&#34;enforcing_consecutive_local_origin_failure&#34;</span>: <span style=color:#2aa198>0</span>,                                                                                                                                                                                                   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">27</span><span>      <span style=color:#268bd2>&#34;enforcing_failure_percentage&#34;</span>: <span style=color:#2aa198>0</span>,                                                                                                                                                                                                                 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">28</span><span>      <span style=color:#268bd2>&#34;enforcing_success_rate&#34;</span>: <span style=color:#2aa198>0</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">29</span><span>    },                             
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">30</span><span>    <span style=color:#268bd2>&#34;type&#34;</span>: <span style=color:#2aa198>&#34;EDS&#34;</span>,                             
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">31</span><span>    <span style=color:#268bd2>&#34;typed_extension_protocol_options&#34;</span>: {                 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">32</span><span>      <span style=color:#268bd2>&#34;envoy.extensions.upstreams.http.v3.HttpProtocolOptions&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">33</span><span>        <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">34</span><span>        <span style=color:#268bd2>&#34;explicit_http_config&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">35</span><span>          <span style=color:#268bd2>&#34;http2_protocol_options&#34;</span>: {}                               
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">36</span><span>        }                             
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">37</span><span>      }                                                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">38</span><span>    }                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">39</span><span>  },                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">40</span><span>  <span style=color:#268bd2>&#34;last_updated&#34;</span>: <span style=color:#2aa198>&#34;2022-10-04T21:23:37.389Z&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">41</span><span>  <span style=color:#268bd2>&#34;version_info&#34;</span>: <span style=color:#2aa198>&#34;f4340f9c-59b7-4320-9d87-920109a7f511&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">42</span><span>}
</span></span></code></pre></div><h3 id=gateway---dynamic-endpoint-configs>Gateway - Dynamic Endpoint Configs</h3><p>Which Means now I have to go check out the EDS configuration, and which is why the <code>?include_eds</code> was appended to the original /config_dump request.</p><p>Reading the endpoint_config I could finally see:</p><ol><li>the actual address of the Envoy Proxy supporting my &ldquo;Monolith&rdquo; application. Envoy for the monolith is running on <code>10.0.0.5</code> and listening in on port <code>5000</code>.</li></ol><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1</span><span>[Filter]&gt; .configs[<span style=color:#2aa198>2</span>].dynamic_endpoint_configs[<span style=color:#2aa198>0</span>]endpoint_config
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3</span><span>  <span style=color:#268bd2>&#34;endpoint_config&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4</span><span>    <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.config.endpoint.v3.ClusterLoadAssignment&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5</span><span>    <span style=color:#268bd2>&#34;endpoints&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6</span><span>      {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7</span><span>        <span style=color:#268bd2>&#34;lb_endpoints&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8</span><span>          {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9</span><span>            <span style=color:#268bd2>&#34;endpoint&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10</span><span>              <span style=color:#268bd2>&#34;address&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11</span><span>                <span style=color:#268bd2>&#34;socket_address&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12</span><span>                  <span style=color:#268bd2>&#34;address&#34;</span>: <span style=color:#2aa198>&#34;10.0.0.55&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13</span><span>                  <span style=color:#268bd2>&#34;port_value&#34;</span>: <span style=color:#2aa198>5000</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">14</span><span>                }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">15</span><span>              },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">16</span><span>              <span style=color:#268bd2>&#34;health_check_config&#34;</span>: {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">17</span><span>            },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">18</span><span>            <span style=color:#268bd2>&#34;health_status&#34;</span>: <span style=color:#2aa198>&#34;HEALTHY&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">19</span><span>            <span style=color:#268bd2>&#34;load_balancing_weight&#34;</span>: <span style=color:#2aa198>1</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">20</span><span>            <span style=color:#268bd2>&#34;metadata&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">21</span><span>              <span style=color:#268bd2>&#34;filter_metadata&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">22</span><span>                <span style=color:#268bd2>&#34;envoy.lb&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">23</span><span>                  <span style=color:#268bd2>&#34;kuma.io/protocol&#34;</span>: <span style=color:#2aa198>&#34;http&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">24</span><span>                  <span style=color:#268bd2>&#34;kuma.io/zone&#34;</span>: <span style=color:#2aa198>&#34;on_prem&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">25</span><span>                },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">26</span><span>                <span style=color:#268bd2>&#34;envoy.transport_socket_match&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">27</span><span>                  <span style=color:#268bd2>&#34;kuma.io/protocol&#34;</span>: <span style=color:#2aa198>&#34;http&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">28</span><span>                  <span style=color:#268bd2>&#34;kuma.io/zone&#34;</span>: <span style=color:#2aa198>&#34;on_prem&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">29</span><span>                }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">30</span><span>              }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">31</span><span>            }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">32</span><span>          }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">33</span><span>        ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">34</span><span>        <span style=color:#268bd2>&#34;locality&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">35</span><span>          <span style=color:#268bd2>&#34;zone&#34;</span>: <span style=color:#2aa198>&#34;on_prem&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">36</span><span>        }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">37</span><span>      }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">38</span><span>    ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">39</span><span>    <span style=color:#268bd2>&#34;policy&#34;</span>: {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">40</span><span>      <span style=color:#268bd2>&#34;overprovisioning_factor&#34;</span>: <span style=color:#2aa198>140</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">41</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">42</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">43</span><span>}
</span></span></code></pre></div><p>Ok so now I know:</p><p><code>Gateway --> Envoy Proxy --> Listener --> Filter Chain with Route --> to Monolith Cluster --> EDS endpoint pointing to Envoy on Monolith Server</code></p><p>The next question I had was, how is the Envoy Proxy of the Monolith Configured?</p><h2 id=monolith---dynamic-listener>Monolith - Dynamic Listener</h2><p>Take the same pattern as I did for the Gateway, I started with the listeners first. This listener has lots of info so we&rsquo;ll break it up.</p><p><strong>First</strong> - I identified the listener, and I can see envoy is listening on <code>10.0.0.55:5000</code>:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span>[Filter]&gt; .configs[<span style=color:#2aa198>2</span>].dynamic_listeners[<span style=color:#2aa198>0</span>].active_state.listener.address
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">2</span><span>{    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">3</span><span>  <span style=color:#268bd2>&#34;socket_address&#34;</span>: {                                               
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">4</span><span>    <span style=color:#268bd2>&#34;address&#34;</span>: <span style=color:#2aa198>&#34;10.0.0.55&#34;</span>,                                           
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">5</span><span>    <span style=color:#268bd2>&#34;port_value&#34;</span>: <span style=color:#2aa198>5000</span>                                                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">6</span><span>  }                                                                    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">7</span><span>}        
</span></span></code></pre></div><p><strong>Second</strong> - I looked at the filter chains. There were multiple filters, but I found the HTTP Connection Manager to route traffic into to monolith application.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1</span><span>[Filter]&gt; .configs[<span style=color:#2aa198>2</span>].dynamic_listeners[<span style=color:#2aa198>0</span>].active_state.listener.filter_chains[<span style=color:#2aa198>0</span>].filters[<span style=color:#2aa198>1</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2</span><span>{    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3</span><span>  <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;envoy.filters.network.http_connection_manager&#34;</span>,          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4</span><span>  <span style=color:#268bd2>&#34;typed_config&#34;</span>: {                                                   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5</span><span>    <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6</span><span>    <span style=color:#268bd2>&#34;common_http_protocol_options&#34;</span>: {                                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7</span><span>      <span style=color:#268bd2>&#34;idle_timeout&#34;</span>: <span style=color:#2aa198>&#34;7200s&#34;</span>                                                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8</span><span>    },                                                                                 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9</span><span>    <span style=color:#268bd2>&#34;forward_client_cert_details&#34;</span>: <span style=color:#2aa198>&#34;SANITIZE_SET&#34;</span>,                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10</span><span>    <span style=color:#268bd2>&#34;http_filters&#34;</span>: [              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11</span><span>      {                                      
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12</span><span>        <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;envoy.filters.http.router&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13</span><span>        <span style=color:#268bd2>&#34;typed_config&#34;</span>: {        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">14</span><span>          <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.extensions.filters.http.router.v3.Router&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">15</span><span>        }                                      
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">16</span><span>      }                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">17</span><span>    ],                                                                                   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">18</span><span>    <span style=color:#268bd2>&#34;route_config&#34;</span>: {                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">19</span><span>      <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;inbound:monolith-service_svc_5000&#34;</span>,                                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">20</span><span>      <span style=color:#268bd2>&#34;request_headers_to_remove&#34;</span>: [                                                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">21</span><span>         <span style=color:#2aa198>&#34;x-kuma-tags&#34;</span>                                                                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">22</span><span>      ],                                       
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">23</span><span>      <span style=color:#268bd2>&#34;validate_clusters&#34;</span>: <span style=color:#cb4b16>false</span>,                                                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">24</span><span>      <span style=color:#268bd2>&#34;virtual_hosts&#34;</span>: [                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">25</span><span>        {                                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">26</span><span>          <span style=color:#268bd2>&#34;domains&#34;</span>: [                                                                                                                                                                                                                                   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">27</span><span>             <span style=color:#2aa198>&#34;*&#34;</span>                                                                                                                                                                                                                                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">28</span><span>          ],                                                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">29</span><span>          <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;monolith-service_svc_5000&#34;</span>,                                                                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">30</span><span>          <span style=color:#268bd2>&#34;routes&#34;</span>: [                                                                                                    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">31</span><span>            {                                                                                                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">32</span><span>              <span style=color:#268bd2>&#34;match&#34;</span>: {                           
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">33</span><span>                <span style=color:#268bd2>&#34;prefix&#34;</span>: <span style=color:#2aa198>&#34;/&#34;</span>                               
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">34</span><span>              },                                      
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">35</span><span>              <span style=color:#268bd2>&#34;route&#34;</span>: {                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">36</span><span>                <span style=color:#268bd2>&#34;cluster&#34;</span>: <span style=color:#2aa198>&#34;localhost:8080&#34;</span>,          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">37</span><span>                <span style=color:#268bd2>&#34;timeout&#34;</span>: <span style=color:#2aa198>&#34;0s&#34;</span>                                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">38</span><span>              }                                                                          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">39</span><span>            }                                                                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">40</span><span>          ]                                                                                                                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">41</span><span>        }                                                             
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">42</span><span>      ]                                                                                                                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">43</span><span>    },                                                                                                                           
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">44</span><span>    <span style=color:#268bd2>&#34;set_current_client_cert_details&#34;</span>: {                                                                                           
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">45</span><span>      <span style=color:#268bd2>&#34;uri&#34;</span>: <span style=color:#cb4b16>true</span>                                       
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">46</span><span>    },                                                                                                                               
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">47</span><span>    <span style=color:#268bd2>&#34;stat_prefix&#34;</span>: <span style=color:#2aa198>&#34;localhost_8080&#34;</span>,                          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">48</span><span>    <span style=color:#268bd2>&#34;stream_idle_timeout&#34;</span>: <span style=color:#2aa198>&#34;3600s&#34;</span>                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">49</span><span>  }                                                                                            
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">50</span><span>}      
</span></span></code></pre></div><p><strong>Third</strong> - and final I located the cluster <code>localhost:8080</code> and found that in there is contains the endpoint to reach the actual application it is backing.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1</span><span>[Filter]&gt; .configs[<span style=color:#2aa198>1</span>].dynamic_active_clusters[<span style=color:#2aa198>1</span>]                                            
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2</span><span>{    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3</span><span>  <span style=color:#268bd2>&#34;cluster&#34;</span>: {                                                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4</span><span>    <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.config.cluster.v3.Cluster&#34;</span>,   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5</span><span>    <span style=color:#268bd2>&#34;alt_stat_name&#34;</span>: <span style=color:#2aa198>&#34;localhost_8080&#34;</span>,                                                                               
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6</span><span>    <span style=color:#268bd2>&#34;connect_timeout&#34;</span>: <span style=color:#2aa198>&#34;10s&#34;</span>,                                                      
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7</span><span>    <span style=color:#268bd2>&#34;load_assignment&#34;</span>: {                                                             
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8</span><span>      <span style=color:#268bd2>&#34;cluster_name&#34;</span>: <span style=color:#2aa198>&#34;localhost:8080&#34;</span>,                                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9</span><span>      <span style=color:#268bd2>&#34;endpoints&#34;</span>: [                                                       
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10</span><span>        {                          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11</span><span>          <span style=color:#268bd2>&#34;lb_endpoints&#34;</span>: [                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12</span><span>            {                               
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13</span><span>              <span style=color:#268bd2>&#34;endpoint&#34;</span>: {      
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">14</span><span>                <span style=color:#268bd2>&#34;address&#34;</span>: {                                                           
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">15</span><span>                  <span style=color:#268bd2>&#34;socket_address&#34;</span>: {          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">16</span><span>                    <span style=color:#268bd2>&#34;address&#34;</span>: <span style=color:#2aa198>&#34;127.0.0.1&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">17</span><span>                    <span style=color:#268bd2>&#34;port_value&#34;</span>: <span style=color:#2aa198>8080</span>                                                   
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">18</span><span>                  }                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">19</span><span>                }                                                                          
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">20</span><span>              }                                                                              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">21</span><span>            }                                                                                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">22</span><span>          ]                                    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">23</span><span>        }                                                                                        
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">24</span><span>      ]                                         
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">25</span><span>    },                                            
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">26</span><span>    <span style=color:#268bd2>&#34;name&#34;</span>: <span style=color:#2aa198>&#34;localhost:8080&#34;</span>,                                                                                                                                                                                                                            
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">27</span><span>    <span style=color:#268bd2>&#34;type&#34;</span>: <span style=color:#2aa198>&#34;STATIC&#34;</span>,                                                                                                                                                                                                                                    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">28</span><span>    <span style=color:#268bd2>&#34;typed_extension_protocol_options&#34;</span>: {                     
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">29</span><span>      <span style=color:#268bd2>&#34;envoy.extensions.upstreams.http.v3.HttpProtocolOptions&#34;</span>: {                                                      
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">30</span><span>        <span style=color:#268bd2>&#34;@type&#34;</span>: <span style=color:#2aa198>&#34;type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions&#34;</span>,                           
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">31</span><span>        <span style=color:#268bd2>&#34;common_http_protocol_options&#34;</span>: {                                                                                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">32</span><span>          <span style=color:#268bd2>&#34;idle_timeout&#34;</span>: <span style=color:#2aa198>&#34;7200s&#34;</span>                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">33</span><span>        },                                                  
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">34</span><span>        <span style=color:#268bd2>&#34;explicit_http_config&#34;</span>: {                     
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">35</span><span>          <span style=color:#268bd2>&#34;http_protocol_options&#34;</span>: {}                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">36</span><span>        }                                             
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">37</span><span>      }                                                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">38</span><span>    }                                                                                    
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">39</span><span>  },                                                                                       
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">40</span><span>  <span style=color:#268bd2>&#34;last_updated&#34;</span>: <span style=color:#2aa198>&#34;2022-10-04T21:24:12.976Z&#34;</span>,                                                                                
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">41</span><span>  <span style=color:#268bd2>&#34;version_info&#34;</span>: <span style=color:#2aa198>&#34;27a728ec-3bce-45a0-a4e1-a2d38d3bf4bf&#34;</span>              
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">42</span><span>}                                                                                                                              
</span></span></code></pre></div><h2 id=cool-all-done>Cool! All done</h2><p>Just wanted to highlight that it&rsquo;s not mysterious.</p></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=https://DaniellaFreese.github.io/tags/service-mesh/>service mesh</a>
<a href=https://DaniellaFreese.github.io/tags/kong-mesh/>Kong Mesh</a>
<a href=https://DaniellaFreese.github.io/tags/kuma/>Kuma</a>
<a href=https://DaniellaFreese.github.io/tags/envoy-proxy/>Envoy Proxy</a></div></div></div></article></div><div id=comments-container></div></div><footer><div class=container><div class=recent-posts><strong>Latest posts</strong><ul><li><a href=https://DaniellaFreese.github.io/article/frontend/frontend-1/>Should you become a Full Stack Developer?</a></li><li><a href=https://DaniellaFreese.github.io/code/ansible/copy-secret-between-namespaces/>How to Copy Secrets Between Namespaces with Kubernetes Core Ansible Collection</a></li><li><a href=https://DaniellaFreese.github.io/code/ansible/kube-services/>Ansible - How to Wait for on a Kubernetes Service with the Kubernetes Core Collection</a></li><li><a href=https://DaniellaFreese.github.io/article/books/year-2022/>Book List of 2022 - A recap of the books read</a></li><li><a href=https://DaniellaFreese.github.io/article/openshift/fav-ocp-security-posts/>Openshift Security Best References</a></li><li><a href=https://DaniellaFreese.github.io/code/ansible/module-unit-tests-mac/>How to Write an Ansible Module Unit Test in the Ansible Collection Paradigm</a></li><li><a href=https://DaniellaFreese.github.io/article/mesh/kuma-mesh-what-is-spiffe/>What Is Spiffe and How is it used in Kuma Mesh</a></li></ul></div><div class=categories><a href=/categories/><strong>Categories</strong></a><ul><li><a href=/categories/ansible>Ansible
(4)</a></li><li><a href=/categories/service-mesh>Service mesh
(4)</a></li><li><a href=/categories/books>Books
(1)</a></li><li><a href=/categories/frontend>Frontend
(1)</a></li><li><a href=/categories/javascript>Javascript
(1)</a></li><li><a href=/categories/openshift>Openshift
(1)</a></li><li><a href=/categories/react>React
(1)</a></li></ul></div><div class=right><div class=external-profiles><strong>Social media</strong>
<a href=https://github.com/DaniellaFreese target=_blank><i class="fab fa-github"></i></a>
<a href=https://www.linkedin.com/in/daniellafreese/ target=_blank><i class="fab fa-linkedin"></i></a></div></div></div></footer><div class=credits><div class=container><div class=copyright><a href=https://github.com/Lednerb target=_blank>&copy;
2023
by Lednerb</a></div><div class=author><a href=https://github.com/Lednerb/bilberry-hugo-theme target=_blank>Bilberry Hugo Theme</a></div></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-JRGW0G2KDK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JRGW0G2KDK",{anonymize_ip:!1})}</script><script src=https://DaniellaFreese.github.io/theme.js></script><div id=activate-algolia-search class=hidden><input type=hidden id=algolia-search-appId value=45CEN6X6AT>
<input type=hidden id=algolia-search-apiKey value=16030625f1a4d0dd3b8aefd794fd4cf1>
<input type=hidden id=algolia-search-indexName value=bilberry-hugo-theme>
<input type=hidden id=algolia-search-noSearchResults value="Nothing found.">
<input type=hidden id=algolia-search-currentLanguageOnly></div></body></html>